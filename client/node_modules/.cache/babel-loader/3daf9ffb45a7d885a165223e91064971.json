{"ast":null,"code":"import _classPrivateFieldLooseBase from \"/Users/brittany/repos/dashboard-test/dashboard-test/node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseBase\";\nimport _classPrivateFieldLooseKey from \"/Users/brittany/repos/dashboard-test/dashboard-test/node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseKey\";\nimport axios from \"axios\";\nimport { features } from \"../data/countries.json\";\nimport legendItems from \"../entities/LegendItems\";\n\nvar _processData = _classPrivateFieldLooseKey(\"processData\");\n\nvar _setCountryColor = _classPrivateFieldLooseKey(\"setCountryColor\");\n\nclass LoadCountriesTask {\n  constructor() {\n    this.mentionsUrl = \"http://localhost:5000/events/countries\";\n    this.setState = null;\n    this.mapCountries = features;\n\n    this.load = setState => {\n      this.setState = setState;\n      axios.get(\"http://localhost:5000/events/countries\").then(result => _classPrivateFieldLooseBase(this, _processData)[_processData](result.data)).catch(error => console.log(error));\n    };\n\n    Object.defineProperty(this, _processData, {\n      writable: true,\n      value: countryMentions => {\n        // For every country received from the country mentions endpoint\n        for (let i = 0; i < this.mapCountries.length; i++) {\n          // assign mapCountry to each item\n          const mapCountry = this.mapCountries[i]; // assign countrymention to countries that match the name of each map item\n\n          const countryMention = countryMentions.find(countryMention => countryMention._id === mapCountry.properties.ADMIN //mapCountry.properties.ISO_A3\n          ); // set two new properies on the country json file:\n          // confirmed field set to a number : in my case, mention\n          // confirmedText field set to text : Template literal from original map\n\n          mapCountry.properties.mentionsNumber = 0; // mapCountry.properties.confirmed = 0;\n\n          mapCountry.properties.mentionsText = \"\"; // confirmedText\n          // If the country has any mentions....\n\n          if (countryMention != null) {\n            // Declare a variable converting the mention count to a number (To be sure)\n            const mentions = Number(countryMention.count); // Assign the mentions count to the mentionsNumber field\n\n            mapCountry.properties.mentionsNumber = mentions; // Assign a template literal to the mentionsText field\n\n            mapCountry.properties.mentionsText = `${mentions} mentions in last 24 hours`;\n          } // Then, find the country color for each country\n\n\n          _classPrivateFieldLooseBase(this, _setCountryColor)[_setCountryColor](mapCountry);\n        }\n\n        this.setState(this.mapCountries);\n        console.log(this.mapCountries[7]); // Test for UAE\n\n        console.log(this.mapCountries[8]); // Test for country with no mentions\n      }\n    });\n    Object.defineProperty(this, _setCountryColor, {\n      writable: true,\n      value: mapCountry => {\n        // In the legned items, look for the item corresponding with the bracket number\n        const legendItem = legendItems.find(legendItem => // Pass the number of mentions to the function in legendItems\n        legendItem.isFor(mapCountry.properties.mentionsNumber)); // if the legend item is not empty, assign the color of the item to the country\n\n        if (legendItem != null) {\n          mapCountry.properties.color = legendItem.color;\n        }\n      }\n    });\n  } // #formatNumberWithCommas = function (number) {\n  //   return number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n  // };\n\n\n}\n\nexport default LoadCountriesTask;","map":{"version":3,"sources":["/Users/brittany/repos/dashboard-test/dashboard-test/src/tasks/LoadCountriesTask.js"],"names":["axios","features","legendItems","LoadCountriesTask","mentionsUrl","setState","mapCountries","load","get","then","result","data","catch","error","console","log","countryMentions","i","length","mapCountry","countryMention","find","_id","properties","ADMIN","mentionsNumber","mentionsText","mentions","Number","count","legendItem","isFor","color"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,wBAAzB;AACA,OAAOC,WAAP,MAAwB,yBAAxB;;;;;;AAEA,MAAMC,iBAAN,CAAwB;AAAA;AAAA,SACtBC,WADsB,GACR,wCADQ;AAAA,SAEtBC,QAFsB,GAEX,IAFW;AAAA,SAGtBC,YAHsB,GAGPL,QAHO;;AAAA,SAKtBM,IALsB,GAKdF,QAAD,IAAc;AACnB,WAAKA,QAAL,GAAgBA,QAAhB;AACAL,MAAAA,KAAK,CACFQ,GADH,CACO,wCADP,EAEGC,IAFH,CAESC,MAAD,gCAAY,IAAZ,8BAA8BA,MAAM,CAACC,IAArC,CAFR,EAGGC,KAHH,CAGUC,KAAD,IAAWC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAHpB;AAID,KAXqB;;AAAA;AAAA;AAAA,aAaNG,eAAD,IAAqB;AAClC;AACA,aAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKX,YAAL,CAAkBY,MAAtC,EAA8CD,CAAC,EAA/C,EAAmD;AACjD;AACA,gBAAME,UAAU,GAAG,KAAKb,YAAL,CAAkBW,CAAlB,CAAnB,CAFiD,CAGjD;;AACA,gBAAMG,cAAc,GAAGJ,eAAe,CAACK,IAAhB,CACpBD,cAAD,IAAoBA,cAAc,CAACE,GAAf,KAAuBH,UAAU,CAACI,UAAX,CAAsBC,KAD5C,CACkD;AADlD,WAAvB,CAJiD,CAOjD;AACA;AACA;;AACAL,UAAAA,UAAU,CAACI,UAAX,CAAsBE,cAAtB,GAAuC,CAAvC,CAViD,CAUP;;AAC1CN,UAAAA,UAAU,CAACI,UAAX,CAAsBG,YAAtB,GAAqC,EAArC,CAXiD,CAWR;AACzC;;AACA,cAAIN,cAAc,IAAI,IAAtB,EAA4B;AAC1B;AACA,kBAAMO,QAAQ,GAAGC,MAAM,CAACR,cAAc,CAACS,KAAhB,CAAvB,CAF0B,CAG1B;;AACAV,YAAAA,UAAU,CAACI,UAAX,CAAsBE,cAAtB,GAAuCE,QAAvC,CAJ0B,CAK1B;;AACAR,YAAAA,UAAU,CAACI,UAAX,CAAsBG,YAAtB,GAAsC,GAAEC,QAAS,4BAAjD;AACD,WApBgD,CAqBjD;;;AACA,gFAAsBR,UAAtB;AACD;;AACD,aAAKd,QAAL,CAAc,KAAKC,YAAnB;AACAQ,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAKT,YAAL,CAAkB,CAAlB,CAAZ,EA3BkC,CA2BC;;AACnCQ,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAKT,YAAL,CAAkB,CAAlB,CAAZ,EA5BkC,CA4BC;AACpC;AA1CqB;AAAA;AAAA;AAAA,aA2CFa,UAAD,IAAgB;AACjC;AACA,cAAMW,UAAU,GAAG5B,WAAW,CAACmB,IAAZ,CAAkBS,UAAD,IAClC;AACAA,QAAAA,UAAU,CAACC,KAAX,CAAiBZ,UAAU,CAACI,UAAX,CAAsBE,cAAvC,CAFiB,CAAnB,CAFiC,CAMjC;;AACA,YAAIK,UAAU,IAAI,IAAlB,EAAwB;AACtBX,UAAAA,UAAU,CAACI,UAAX,CAAsBS,KAAtB,GAA8BF,UAAU,CAACE,KAAzC;AACD;AACF;AArDqB;AAAA,IAuDtB;AACA;AACA;;;AAzDsB;;AA4DxB,eAAe7B,iBAAf","sourcesContent":["import axios from \"axios\";\nimport { features } from \"../data/countries.json\";\nimport legendItems from \"../entities/LegendItems\";\n\nclass LoadCountriesTask {\n  mentionsUrl = \"http://localhost:5000/events/countries\";\n  setState = null;\n  mapCountries = features;\n\n  load = (setState) => {\n    this.setState = setState;\n    axios\n      .get(\"http://localhost:5000/events/countries\")\n      .then((result) => this.#processData(result.data))\n      .catch((error) => console.log(error));\n  };\n\n  #processData = (countryMentions) => {\n    // For every country received from the country mentions endpoint\n    for (let i = 0; i < this.mapCountries.length; i++) {\n      // assign mapCountry to each item\n      const mapCountry = this.mapCountries[i];\n      // assign countrymention to countries that match the name of each map item\n      const countryMention = countryMentions.find(\n        (countryMention) => countryMention._id === mapCountry.properties.ADMIN //mapCountry.properties.ISO_A3\n      );\n      // set two new properies on the country json file:\n      // confirmed field set to a number : in my case, mention\n      // confirmedText field set to text : Template literal from original map\n      mapCountry.properties.mentionsNumber = 0; // mapCountry.properties.confirmed = 0;\n      mapCountry.properties.mentionsText = \"\"; // confirmedText\n      // If the country has any mentions....\n      if (countryMention != null) {\n        // Declare a variable converting the mention count to a number (To be sure)\n        const mentions = Number(countryMention.count);\n        // Assign the mentions count to the mentionsNumber field\n        mapCountry.properties.mentionsNumber = mentions;\n        // Assign a template literal to the mentionsText field\n        mapCountry.properties.mentionsText = `${mentions} mentions in last 24 hours`;\n      }\n      // Then, find the country color for each country\n      this.#setCountryColor(mapCountry);\n    }\n    this.setState(this.mapCountries);\n    console.log(this.mapCountries[7]); // Test for UAE\n    console.log(this.mapCountries[8]); // Test for country with no mentions\n  };\n  #setCountryColor = (mapCountry) => {\n    // In the legned items, look for the item corresponding with the bracket number\n    const legendItem = legendItems.find((legendItem) =>\n      // Pass the number of mentions to the function in legendItems\n      legendItem.isFor(mapCountry.properties.mentionsNumber)\n    );\n    // if the legend item is not empty, assign the color of the item to the country\n    if (legendItem != null) {\n      mapCountry.properties.color = legendItem.color;\n    }\n  };\n\n  // #formatNumberWithCommas = function (number) {\n  //   return number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n  // };\n}\n\nexport default LoadCountriesTask;\n"]},"metadata":{},"sourceType":"module"}