{"ast":null,"code":"import _classPrivateFieldLooseBase from \"/Users/brittany/repos/dashboard-test/dashboard-test/node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseBase\";\nimport _classPrivateFieldLooseKey from \"/Users/brittany/repos/dashboard-test/dashboard-test/node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseKey\";\nimport axios from \"axios\";\nimport { features } from \"../data/countries.json\";\nimport legendItems from \"../entities/LegendItems\";\n\nvar _processData = _classPrivateFieldLooseKey(\"processData\");\n\nvar _setCountryColor = _classPrivateFieldLooseKey(\"setCountryColor\");\n\nclass LoadCountriesTask {\n  constructor() {\n    this.mentionsUrl = \"http://localhost:5000/events/countries\";\n    this.setState = null;\n    this.mapCountries = features;\n\n    this.load = setState => {\n      this.setState = setState;\n      axios.get(\"http://localhost:5000/events/countries\").then(result => _classPrivateFieldLooseBase(this, _processData)[_processData](result.data)).catch(error => console.log(error));\n    };\n\n    Object.defineProperty(this, _processData, {\n      writable: true,\n      value: countryMentions => {\n        for (let i = 0; i < this.mapCountries.length; i++) {\n          const mapCountry = this.mapCountries[i];\n          const countryMention = countryMentions.find(countryMention => countryMention._id === mapCountry.properties.ADMIN //mapCountry.properties.ISO_A3\n          );\n          mapCountry.properties.mentionsNumber = 0;\n          mapCountry.properties.mentionsText = \"\";\n\n          if (countryMention != null) {\n            const mentions = Number(countryMention.count);\n            mapCountry.properties.mentionsNumber = mentions;\n            mapCountry.properties.mentionsText = `${mentions} mentions in last 24 hours`;\n          }\n\n          _classPrivateFieldLooseBase(this, _setCountryColor)[_setCountryColor](mapCountry);\n        }\n\n        this.setState(this.mapCountries);\n      }\n    });\n    Object.defineProperty(this, _setCountryColor, {\n      writable: true,\n      value: mapCountry => {\n        const legendItem = legendItems.find(legendItem => legendItem.isFor(mapCountry.properties.mentionsNumber));\n\n        if (legendItem != null) {\n          mapCountry.properties.color = legendItem.color;\n        }\n      }\n    });\n  }\n\n}\n\nexport default LoadCountriesTask;","map":{"version":3,"sources":["/Users/brittany/repos/dashboard-test/dashboard-test/src/tasks/LoadCountriesTask.js"],"names":["axios","features","legendItems","LoadCountriesTask","mentionsUrl","setState","mapCountries","load","get","then","result","data","catch","error","console","log","countryMentions","i","length","mapCountry","countryMention","find","_id","properties","ADMIN","mentionsNumber","mentionsText","mentions","Number","count","legendItem","isFor","color"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,wBAAzB;AACA,OAAOC,WAAP,MAAwB,yBAAxB;;;;;;AAEA,MAAMC,iBAAN,CAAwB;AAAA;AAAA,SACtBC,WADsB,GACR,wCADQ;AAAA,SAEtBC,QAFsB,GAEX,IAFW;AAAA,SAGtBC,YAHsB,GAGPL,QAHO;;AAAA,SAKtBM,IALsB,GAKdF,QAAD,IAAc;AACnB,WAAKA,QAAL,GAAgBA,QAAhB;AACAL,MAAAA,KAAK,CACFQ,GADH,CACO,wCADP,EAEGC,IAFH,CAESC,MAAD,gCAAY,IAAZ,8BAA8BA,MAAM,CAACC,IAArC,CAFR,EAGGC,KAHH,CAGUC,KAAD,IAAWC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAHpB;AAID,KAXqB;;AAAA;AAAA;AAAA,aAaNG,eAAD,IAAqB;AAClC,aAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKX,YAAL,CAAkBY,MAAtC,EAA8CD,CAAC,EAA/C,EAAmD;AACjD,gBAAME,UAAU,GAAG,KAAKb,YAAL,CAAkBW,CAAlB,CAAnB;AACA,gBAAMG,cAAc,GAAGJ,eAAe,CAACK,IAAhB,CACpBD,cAAD,IAAoBA,cAAc,CAACE,GAAf,KAAuBH,UAAU,CAACI,UAAX,CAAsBC,KAD5C,CACkD;AADlD,WAAvB;AAIAL,UAAAA,UAAU,CAACI,UAAX,CAAsBE,cAAtB,GAAuC,CAAvC;AACAN,UAAAA,UAAU,CAACI,UAAX,CAAsBG,YAAtB,GAAqC,EAArC;;AAEA,cAAIN,cAAc,IAAI,IAAtB,EAA4B;AAC1B,kBAAMO,QAAQ,GAAGC,MAAM,CAACR,cAAc,CAACS,KAAhB,CAAvB;AACAV,YAAAA,UAAU,CAACI,UAAX,CAAsBE,cAAtB,GAAuCE,QAAvC;AACAR,YAAAA,UAAU,CAACI,UAAX,CAAsBG,YAAtB,GAAsC,GAAEC,QAAS,4BAAjD;AACD;;AACD,gFAAsBR,UAAtB;AACD;;AACD,aAAKd,QAAL,CAAc,KAAKC,YAAnB;AACD;AA/BqB;AAAA;AAAA;AAAA,aAiCFa,UAAD,IAAgB;AACjC,cAAMW,UAAU,GAAG5B,WAAW,CAACmB,IAAZ,CAAkBS,UAAD,IAClCA,UAAU,CAACC,KAAX,CAAiBZ,UAAU,CAACI,UAAX,CAAsBE,cAAvC,CADiB,CAAnB;;AAGA,YAAIK,UAAU,IAAI,IAAlB,EAAwB;AACtBX,UAAAA,UAAU,CAACI,UAAX,CAAsBS,KAAtB,GAA8BF,UAAU,CAACE,KAAzC;AACD;AACF;AAxCqB;AAAA;;AAAA;;AA2CxB,eAAe7B,iBAAf","sourcesContent":["import axios from \"axios\";\nimport { features } from \"../data/countries.json\";\nimport legendItems from \"../entities/LegendItems\";\n\nclass LoadCountriesTask {\n  mentionsUrl = \"http://localhost:5000/events/countries\";\n  setState = null;\n  mapCountries = features;\n\n  load = (setState) => {\n    this.setState = setState;\n    axios\n      .get(\"http://localhost:5000/events/countries\")\n      .then((result) => this.#processData(result.data))\n      .catch((error) => console.log(error));\n  };\n\n  #processData = (countryMentions) => {\n    for (let i = 0; i < this.mapCountries.length; i++) {\n      const mapCountry = this.mapCountries[i];\n      const countryMention = countryMentions.find(\n        (countryMention) => countryMention._id === mapCountry.properties.ADMIN //mapCountry.properties.ISO_A3\n      );\n\n      mapCountry.properties.mentionsNumber = 0;\n      mapCountry.properties.mentionsText = \"\";\n\n      if (countryMention != null) {\n        const mentions = Number(countryMention.count);\n        mapCountry.properties.mentionsNumber = mentions;\n        mapCountry.properties.mentionsText = `${mentions} mentions in last 24 hours`;\n      }\n      this.#setCountryColor(mapCountry);\n    }\n    this.setState(this.mapCountries);\n  };\n\n  #setCountryColor = (mapCountry) => {\n    const legendItem = legendItems.find((legendItem) =>\n      legendItem.isFor(mapCountry.properties.mentionsNumber)\n    );\n    if (legendItem != null) {\n      mapCountry.properties.color = legendItem.color;\n    }\n  };\n}\n\nexport default LoadCountriesTask;\n"]},"metadata":{},"sourceType":"module"}